<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Piano Coaching Avanzato 2025</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f0f4f8;
        }
        /* Stili per le input fields per un aspetto piÃ¹ pulito */
        .data-input {
            width: 100%;
            padding: 4px 8px;
            border: 1px solid #d1d5db;
            border-radius: 0.375rem;
            background-color: transparent;
            text-align: center;
            font-size: 0.875rem;
            transition: border-color 0.2s, box-shadow 0.2s;
        }
        .data-input:focus {
            outline: none;
            border-color: #3b82f6;
            box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.4);
        }
        /* Stili per la tabella "sticky header" */
        .sticky-header {
            position: sticky;
            top: 0;
            z-index: 10;
        }
    </style>
</head>
<body class="p-2 sm:p-4 md:p-8">

    <div class="max-w-7xl mx-auto bg-white rounded-2xl shadow-lg p-4 sm:p-6">
        <!-- Header Principale -->
        <header class="w-full p-4 mb-6 rounded-lg bg-[#2c3e50] text-white text-center">
            <h1 class="text-xl sm:text-2xl font-bold">ğŸƒâ€â™‚ï¸ PIANO COACHING AVANZATO 2025: 104kg â†’ 95kg | 0' â†’ 35' CORSA | TIMING OTTIMIZZATO BCAA ğŸ¯</h1>
        </header>

        <!-- Sezione Parametri Metabolici -->
        <section id="metabolic-parameters" class="mb-8 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 text-sm">
             <!-- VerrÃ  popolata da JavaScript -->
        </section>

        <!-- Tabella Piano di Allenamento -->
        <div class="overflow-x-auto rounded-lg border border-gray-200">
            <table class="min-w-full divide-y divide-gray-200">
                <thead class="bg-[#34495e] sticky-header">
                    <tr>
                        <th class="px-2 py-3 text-center text-xs font-bold text-white uppercase tracking-wider w-[90px]">ğŸ“… Data</th>
                        <th class="px-2 py-3 text-center text-xs font-bold text-white uppercase tracking-wider w-[70px]">ğŸ“‹ Giorno</th>
                        <th class="px-2 py-3 text-center text-xs font-bold text-white uppercase tracking-wider w-[120px]">âš¡ Pre-Workout</th>
                        <th class="px-2 py-3 text-center text-xs font-bold text-white uppercase tracking-wider w-[140px]">ğŸŒ… Functional</th>
                        <th class="px-2 py-3 text-center text-xs font-bold text-white uppercase tracking-wider w-[160px]">ğŸŒ† Cardio/Corsa</th>
                        <th class="px-2 py-3 text-center text-xs font-bold text-white uppercase tracking-wider w-[130px]">ğŸ¥£ Colazione</th>
                        <th class="px-2 py-3 text-center text-xs font-bold text-white uppercase tracking-wider w-[130px]">ğŸ Pranzo</th>
                        <th class="px-2 py-3 text-center text-xs font-bold text-white uppercase tracking-wider w-[130px]">ğŸ— Cena</th>
                        <th class="px-2 py-3 text-center text-xs font-bold text-white uppercase tracking-wider w-[70px]">âš–ï¸ Peso</th>
                        <th class="px-2 py-3 text-center text-xs font-bold text-white uppercase tracking-wider w-[70px]">ğŸ’“ FC Med</th>
                        <th class="px-2 py-3 text-center text-xs font-bold text-white uppercase tracking-wider w-[70px]">â±ï¸ Passo</th>
                        <th class="px-2 py-3 text-center text-xs font-bold text-white uppercase tracking-wider w-[70px]">ğŸ˜´ Sonno</th>
                        <th class="px-2 py-3 text-center text-xs font-bold text-white uppercase tracking-wider w-[80px]">ğŸ”¥ Cal Out</th>
                        <th class="px-2 py-3 text-center text-xs font-bold text-white uppercase tracking-wider w-[90px]">ğŸ“Š Bilancio</th>
                    </tr>
                </thead>
                <tbody id="training-plan-body" class="bg-white divide-y divide-gray-200">
                    <!-- Le righe del piano verranno inserite qui da JavaScript -->
                </tbody>
            </table>
        </div>

         <!-- Sezioni Analitiche Aggiuntive -->
        <div class="mt-10 space-y-8">
            <section id="progress-tracking"></section>
            <section id="nutrition-guide"></section>
            <section id="advanced-goals"></section>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Funzioni di utilitÃ  per date e nomi dei giorni
            const formatDate = (date) => {
                const day = String(date.getDate()).padStart(2, '0');
                const month = String(date.getMonth() + 1).padStart(2, '0');
                return `${day}/${month}`;
            };
            const getDayName = (date) => {
                const giorni = ["Dom", "Lun", "Mar", "Mer", "Gio", "Ven", "Sab"];
                return giorni[date.getDay()];
            };

            const tbody = document.getElementById('training-plan-body');

            // --- FUNZIONI PER CREARE SEZIONI E RIGHE ---

            function addMetabolicParameters() {
                const container = document.getElementById('metabolic-parameters');
                const paramData = [
                    { title: "ğŸ“Š PARAMETRI METABOLICI", items: [
                        ["BMR stimato:", "2100 kcal"],
                        ["TDEE attuale:", "2900 kcal"],
                        ["Intake target:", "2075 kcal"],
                        ["Proteine target:", "165g (1.6g/kg)"],
                        ["Colazione timing:", "POST-workout 08:00"]
                    ]},
                    { title: "ğŸ¯ TARGET SETTIMANALI", items: [
                        ["Deficit:", "-825 kcal/giorno"],
                        ["Perdita:", "-0.75 kg"],
                        ["Controllo peso:", "GiovedÃ¬ mattina"],
                        ["Idratazione:", "3L + 500ml/ora sport"],
                        ["Window anabolica:", "30' post-functional"]
                    ]},
                    { title: "ğŸ“ˆ PROGRESSIONE CORSA", items: [
                        ["Settimana 1-2:", "Walk + 30\" run x10"],
                        ["Settimana 3-4:", "1' run / 2' walk x8"],
                        ["Settimana 5-6:", "2' run / 1' walk x8"],
                        ["Settimana 7-8:", "5' run / 1' walk x5"],
                        ["Settimana 9-12:", "35' corsa continua"]
                    ]},
                    { title: "ğŸ’Š TIMING BCAA", items: [
                        ["06:15 Pre-workout"],
                        ["10-15g BCAA/CaffÃ¨"],
                        ["Leucina + Isoleucina"],
                        ["Protezione muscolare"],
                        ["Massima ossidazione ğŸ”¥"]
                    ]}
                ];

                paramData.forEach(section => {
                    const sectionDiv = document.createElement('div');
                    sectionDiv.className = 'bg-[#ecf0f1] rounded-lg p-3';
                    
                    const titleEl = document.createElement('h3');
                    titleEl.className = 'text-sm font-bold bg-[#34495e] text-white -mt-3 -mx-3 mb-3 p-2 rounded-t-lg';
                    titleEl.textContent = section.title;
                    sectionDiv.appendChild(titleEl);

                    const list = document.createElement('ul');
                    list.className = 'space-y-1';
                    section.items.forEach(item => {
                        const li = document.createElement('li');
                        li.className = 'flex justify-between';
                        const key = document.createElement('span');
                        key.className = 'font-semibold';
                        key.textContent = item[0];
                        li.appendChild(key);
                        if(item[1]) {
                            const value = document.createElement('span');
                            value.textContent = item[1];
                            li.appendChild(value);
                        }
                        list.appendChild(li);
                    });
                    sectionDiv.appendChild(list);
                    container.appendChild(sectionDiv);
                });
            }


            function addPhaseSection(title, color) {
                const tr = document.createElement('tr');
                tr.innerHTML = `<td colspan="14" class="py-3 px-4 text-center text-sm font-bold text-white" style="background-color: ${color};">${title}</td>`;
                tbody.appendChild(tr);
            }

            function addDataRow(data, color, kcalTarget) {
                const tr = document.createElement('tr');
                tr.style.backgroundColor = color;
                tr.className = 'text-xs text-gray-700 align-middle';

                // Creazione celle standard
                data.slice(0, 8).forEach(cellData => {
                    const td = document.createElement('td');
                    td.className = 'px-2 py-3 border-b border-gray-200';
                    td.innerHTML = cellData;
                    tr.appendChild(td);
                });

                // Peso (input)
                const tdPeso = document.createElement('td');
                tdPeso.className = 'px-2 py-3 border-b border-gray-200';
                const inputPeso = document.createElement('input');
                inputPeso.type = 'number';
                inputPeso.className = 'data-input';
                inputPeso.step = '0.1';
                inputPeso.addEventListener('input', (e) => {
                    const weight = parseFloat(e.target.value);
                    if (!isNaN(weight) && weight <= 95) {
                        e.target.classList.add('bg-green-100', 'text-green-800', 'font-bold');
                    } else {
                        e.target.classList.remove('bg-green-100', 'text-green-800', 'font-bold');
                    }
                });
                tdPeso.appendChild(inputPeso);
                tr.appendChild(tdPeso);

                // FC Med, Passo, Sonno (input)
                for (let i = 0; i < 3; i++) {
                     const td = document.createElement('td');
                    td.className = 'px-2 py-3 border-b border-gray-200';
                    td.innerHTML = `<input type="text" class="data-input">`;
                    tr.appendChild(td);
                }

                // Cal Out (input) e Bilancio (span)
                const tdCalOut = document.createElement('td');
                tdCalOut.className = 'px-2 py-3 border-b border-gray-200 text-center';
                const inputCalOut = document.createElement('input');
                inputCalOut.type = 'number';
                inputCalOut.className = 'data-input';
                inputCalOut.value = data[12] || '';
                tdCalOut.appendChild(inputCalOut);
                
                const tdBilancio = document.createElement('td');
                tdBilancio.className = 'px-2 py-3 border-b border-gray-200 text-center font-semibold';
                const spanBilancio = document.createElement('span');
                tdBilancio.appendChild(spanBilancio);

                const calculateBalance = () => {
                    const calOutVal = parseFloat(inputCalOut.value);
                    if (!isNaN(calOutVal)) {
                        const balance = calOutVal - kcalTarget;
                        spanBilancio.textContent = balance > 0 ? `+${balance}` : balance;
                        // Conditional formatting
                        if (balance >= -900 && balance <= -700) {
                            spanBilancio.className = 'px-2 py-1 rounded-md bg-green-100 text-green-800';
                        } else if (balance < -900) {
                             spanBilancio.className = 'px-2 py-1 rounded-md bg-red-100 text-red-800';
                        }
                        else {
                            spanBilancio.className = 'px-2 py-1 rounded-md bg-yellow-100 text-yellow-800';
                        }
                    } else {
                        spanBilancio.textContent = '';
                        spanBilancio.className = '';
                    }
                };
                
                inputCalOut.addEventListener('input', calculateBalance);
                calculateBalance(); // Calcolo iniziale

                tr.appendChild(tdCalOut);
                tr.appendChild(tdBilancio);

                tbody.appendChild(tr);
            }
            
            function createStaticTable(containerId, title, titleColor, headers, data, headerColor, dataColor) {
                const container = document.getElementById(containerId);
                container.innerHTML = `
                    <h2 class="text-lg font-bold text-white text-center p-3 rounded-t-lg" style="background-color: ${titleColor};">${title}</h2>
                    <div class="overflow-x-auto border border-t-0 rounded-b-lg">
                        <table class="min-w-full">
                            <thead style="background-color: ${headerColor};">
                                <tr>
                                    ${headers.map(h => `<th class="px-4 py-2 text-left text-xs font-bold text-white uppercase">${h}</th>`).join('')}
                                </tr>
                            </thead>
                            <tbody style="background-color: ${dataColor};">
                                ${data.map(row => `
                                    <tr class="border-t">
                                        ${row.map(cell => `<td class="px-4 py-2 text-sm text-gray-700">${cell}</td>`).join('')}
                                    </tr>
                                `).join('')}
                            </tbody>
                        </table>
                    </div>
                `;
            }


            // --- DATI E LOGICA DI GENERAZIONE DEL PIANO ---

            function generatePhase0() {
                const data = [
                    ["24/09", "Mer", "â˜• CaffÃ¨ + 10g BCAA frutti rossi", "ğŸ’ª Functional Casa 55' (target 650 kcal)", "ğŸš¶â€â™‚ï¸ Walk 6km + 30\" run x10 (target 350 kcal)", "ğŸ§€ Ricotta 120g + ğŸ¥“ Prosciutto 50g + ğŸ Pane 50g + ğŸ Mela + â˜• CaffÃ¨", "ğŸ Pasta 80g + ğŸŸ Tonno 100g + ğŸ¥¬ Insalata + ğŸ«’ Olio 10ml", "ğŸ— Pollo 150g + ğŸ¥” Patate 150g + ğŸ¥¬ Verdure + ğŸ Pane 30g", "", "", "", "", "350"],
                    ["25/09", "Gio", "â˜• CaffÃ¨ + ğŸ¯ Miele 5g + H2O", "ğŸ’ª Functional Casa 55' (target 650 kcal)", "ğŸš¶â€â™‚ï¸ Walk 6km + 30\" run x10 (target 350 kcal)", "ğŸ¥š Uova 2 + ğŸ¥“ Prosciutto 50g + ğŸ Toast 2 + ğŸŒ Banana + â˜• CaffÃ¨", "ğŸš Riso 80g + ğŸ¥š Uova 2 + ğŸ¥¬ Verdure + ğŸ«’ Olio 10ml", "ğŸŸ Pesce 150g + ğŸš Riso 60g + ğŸ¥¬ Verdure + ğŸ«’ Olio 10ml", "", "", "", "", "350"],
                    ["26/09", "Ven", "ğŸ¥¤ BCAA 12g limone + H2O", "ğŸ’ª Functional Casa 55' (target 650 kcal)", "ğŸš¶â€â™‚ï¸ Walk di recupero 45' (target 200 kcal)", "ğŸ¥› Yogurt Greco 200g + ğŸ¥œ Noci 25g + ğŸ¯ Miele + ğŸ« Frutti bosco + â˜• CaffÃ¨", "ğŸ Pasta 80g + ğŸ… Pomodoro + ğŸ§€ Ricotta 80g + ğŸ¥¬ Rucola", "ğŸ¦ƒ Tacchino 150g + ğŸ¥¬ Insalata + ğŸ Pane 40g + ğŸ… Pomodori", "", "", "", "", "200"],
                    ["27/09", "Sab", "â˜• CaffÃ¨ + 10g BCAA frutti rossi", "ğŸ’ª Functional Casa 55' (target 650 kcal)", "ğŸš¶â€â™‚ï¸ Long Walk 10km + test run 2' (target 450 kcal)", "ğŸ§€ Ricotta 120g + ğŸ¥“ Prosciutto 50g + ğŸ Pane 50g + ğŸ Mela + â˜• CaffÃ¨", "ğŸ Pasta 80g + ğŸŸ Tonno 100g + ğŸ¥¬ Insalata + ğŸ«’ Olio 10ml", "ğŸ— Pollo 150g + ğŸ¥” Patate 150g + ğŸ¥¬ Verdure + ğŸ Pane 30g", "", "", "", "", "450"],
                    ["28/09", "Dom", "â˜• CaffÃ¨ + ğŸ¯ Miele 5g + H2O", "ğŸ’ª Functional Casa 55' (target 650 kcal)", "ğŸ˜Œ Riposo attivo - Stretching", "ğŸ¥š Uova 2 + ğŸ¥“ Prosciutto 50g + ğŸ Toast 2 + ğŸŒ Banana + â˜• CaffÃ¨", "ğŸš Riso 80g + ğŸ¥š Uova 2 + ğŸ¥¬ Verdure + ğŸ«’ Olio 10ml", "ğŸŸ Pesce 150g + ğŸš Riso 60g + ğŸ¥¬ Verdure + ğŸ«’ Olio 10ml", "", "", "", "", "100"],
                    ["29/09", "Lun", "ğŸ¥¤ BCAA 12g limone + H2O", "ğŸ’ª Functional Casa 55' (target 650 kcal)", "ğŸš¶â€â™‚ï¸ Walk di recupero 45' (target 200 kcal)", "ğŸ¥› Yogurt Greco 200g + ğŸ¥œ Noci 25g + ğŸ¯ Miele + ğŸ« Frutti bosco + â˜• CaffÃ¨", "ğŸ Pasta 80g + ğŸ… Pomodoro + ğŸ§€ Ricotta 80g + ğŸ¥¬ Rucola", "ğŸ¦ƒ Tacchino 150g + ğŸ¥¬ Insalata + ğŸ Pane 40g + ğŸ… Pomodori", "", "", "", "", "200"],
                    ["30/09", "Mar", "â˜• CaffÃ¨ + 10g BCAA frutti rossi", "ğŸ’ª Functional Casa 55' (target 650 kcal)", "ğŸš¶â€â™‚ï¸ Walk 6km + 30\" run x10 (target 350 kcal)", "ğŸ§€ Ricotta 120g + ğŸ¥“ Prosciutto 50g + ğŸ Pane 50g + ğŸ Mela + â˜• CaffÃ¨", "ğŸ Pasta 80g + ğŸŸ Tonno 100g + ğŸ¥¬ Insalata + ğŸ«’ Olio 10ml", "ğŸ— Pollo 150g + ğŸ¥” Patate 150g + ğŸ¥¬ Verdure + ğŸ Pane 30g", "", "", "", "", "350"]
                ];
                data.forEach(row => addDataRow(row, "#fff5f5", 2075));
            }

            function generatePause(startDate, endDate) {
                const current = new Date(startDate);
                while (current <= endDate) {
                    const rowData = [formatDate(current), getDayName(current), "ğŸ’¤ Niente", "ğŸ˜´ Riposo", "ğŸš¶â€â™‚ï¸ Walk leggera 30' (target 200 kcal)", "ğŸ§€ Colazione normale + â˜• CaffÃ¨", "ğŸ Pranzo normale", "ğŸ— Cena normale", "", "", "", "", "200"];
                    addDataRow(rowData, "#f8f9fa", 2200);
                    current.setDate(current.getDate() + 1);
                }
            }

            function generatePhase1() {
                const startDate = new Date(2025, 9, 5);
                const endDate = new Date(2025, 9, 31);
                const preWorkouts = ["â˜• CaffÃ¨ + 10g BCAA frutti rossi", "â˜• CaffÃ¨ + ğŸ¯ Miele 5g + H2O", "ğŸ¥¤ BCAA 12g limone + H2O", "â˜• CaffÃ¨ + 10g BCAA arancia"];
                const colazioni = ["ğŸ§€ Ricotta 110g + ğŸ¥“ Prosciutto 50g + ğŸ Pane 45g + ğŸ Mela + â˜• CaffÃ¨", "ğŸ¥š Uova 2 + ğŸ¥“ Prosciutto 50g + ğŸ Toast 2 + ğŸŒ Banana + â˜• CaffÃ¨", "ğŸ¥› Yogurt Greco 180g + ğŸ¥œ Noci 25g + ğŸ¯ Miele + ğŸ« Frutti bosco + â˜• CaffÃ¨", "ğŸ§€ Ricotta 110g + ğŸ¯ Miele + ğŸ¥œ Mandorle 20g + ğŸŠ Arancia + â˜• CaffÃ¨"];
                const pranzi = ["ğŸ Pasta 75g + ğŸŸ Tonno 100g + ğŸ¥¬ Insalata + ğŸ«’ Olio 10ml", "ğŸš Riso 75g + ğŸ¥š Uova 2 + ğŸ¥¬ Verdure + ğŸ«’ Olio 10ml", "ğŸ Pasta 75g + ğŸ… Pomodoro + ğŸ§€ Ricotta 80g + ğŸ¥¬ Rucola", "ğŸ«˜ Legumi 100g + ğŸš Riso 60g + ğŸ¥¬ Verdure + ğŸ«’ Olio 10ml"];
                const cene = ["ğŸ— Pollo 150g + ğŸ¥” Patate 150g + ğŸ¥¬ Verdure + ğŸ Pane 30g", "ğŸŸ Pesce 150g + ğŸš Riso 60g + ğŸ¥¬ Verdure + ğŸ«’ Olio 10ml", "ğŸ¦ƒ Tacchino 150g + ğŸ¥¬ Insalata + ğŸ Pane 40g + ğŸ… Pomodori", "ğŸ¥š Frittata 3 uova + ğŸ¥¬ Verdure + ğŸ Pane 40g"];
                
                const current = new Date(startDate);
                let dayCount = 0;
                while (current <= endDate) {
                    const dayOfWeek = current.getDay();
                    const weekInPhase = Math.floor(dayCount / 7);
                    let functional = "", cardio = "", cal = "";

                    if ([1, 3, 5].includes(dayOfWeek)) { // Lun, Mer, Ven
                        functional = "ğŸ’ª Self Functional 55' (target 650 kcal)";
                        cardio = "ğŸš¶â€â™‚ï¸ Walk di recupero 45' (target 200 kcal)";
                        cal = "200";
                    } else if ([2, 4].includes(dayOfWeek)) { // Mar, Gio
                        functional = "ğŸ’ª Self Functional 55' (target 650 kcal)";
                        cardio = weekInPhase <= 1 ? "ğŸƒâ€â™‚ï¸ 1' run/2' walk x8 + cool down (target 380 kcal)" : "ğŸƒâ€â™‚ï¸ 1'30\" run/2' walk x7 + cool down (target 400 kcal)";
                        cal = weekInPhase <= 1 ? "380" : "400";
                    } else if (dayOfWeek === 6) { // Sab
                        functional = "ğŸ’ª Self Functional 55' (target 650 kcal)";
                        cardio = "ğŸš¶â€â™‚ï¸ Long Walk 12km + 2x3' run (target 500 kcal)";
                        cal = "500";
                    } else { // Dom
                        functional = "ğŸ˜Œ Riposo";
                        cardio = "ğŸ˜Œ Riposo attivo - Yoga/Stretching (target 150 kcal)";
                        cal = "150";
                    }
                    
                    const rowData = [formatDate(current), getDayName(current), preWorkouts[dayCount % 4], functional, cardio, colazioni[dayCount % 4], pranzi[dayCount % 4], cene[dayCount % 4], "", "", "", "", cal];
                    addDataRow(rowData, "#f0fffe", 2050);
                    
                    current.setDate(current.getDate() + 1);
                    dayCount++;
                }
            }

            function generatePhase2() {
                 const startDate = new Date(2025, 10, 4);
                 const endDate = new Date(2025, 11, 20);
                 const preWorkouts = ["â˜• CaffÃ¨ + 10g BCAA frutti rossi", "â˜• CaffÃ¨ + ğŸ¯ Miele 5g", "ğŸ¥¤ BCAA 12g limone + H2O", "â˜• CaffÃ¨ + 10g BCAA arancia", "ğŸ¥¤ BCAA 10g + â˜• CaffÃ¨"];
                 const colazioni = ["ğŸ§€ Ricotta 100g + ğŸ¥“ Prosciutto 45g + ğŸ Pane 40g + ğŸ Mela + â˜• CaffÃ¨", "ğŸ¥š Uova 2 + ğŸ¥“ Prosciutto 45g + ğŸ Toast 2 + ğŸŒ Banana + â˜• CaffÃ¨", "ğŸ¥› Yogurt Greco 170g + ğŸ¥œ Noci 22g + ğŸ¯ Miele + ğŸ« Frutti bosco + â˜• CaffÃ¨", "ğŸ§€ Ricotta 100g + ğŸ¯ Miele + ğŸ¥œ Mandorle 18g + ğŸŠ Arancia + â˜• CaffÃ¨", "ğŸ¥š Frittata 2 uova + ğŸ Pane 35g + ğŸ… Pomodori + ğŸ¥¬ Rucola + â˜• CaffÃ¨"];
                 const pranzi = ["ğŸ Pasta 70g + ğŸŸ Tonno 100g + ğŸ¥¬ Insalata + ğŸ«’ Olio 8ml", "ğŸš Riso 70g + ğŸ¥š Uova 2 + ğŸ¥¬ Verdure + ğŸ«’ Olio 8ml", "ğŸ Pasta 70g + ğŸ… Pomodoro + ğŸ§€ Ricotta 70g + ğŸ¥¬ Rucola", "ğŸ«˜ Legumi 100g + ğŸš Riso 55g + ğŸ¥¬ Verdure + ğŸ«’ Olio 8ml", "ğŸ² Minestrone + ğŸ Pane 40g + ğŸ§€ Parmigiano 20g"];
                 const cene = ["ğŸ— Pollo 140g + ğŸ¥” Patate 120g + ğŸ¥¬ Verdure + ğŸ Pane 25g", "ğŸŸ Pesce 140g + ğŸš Riso 50g + ğŸ¥¬ Verdure + ğŸ«’ Olio 8ml", "ğŸ¦ƒ Tacchino 140g + ğŸ¥¬ Insalata + ğŸ Pane 35g + ğŸ… Pomodori", "ğŸ¥š Frittata 3 uova + ğŸ¥¬ Verdure + ğŸ Pane 30g", "ğŸŸ Salmone 120g + ğŸ¥¬ Verdure + ğŸ¥” Patate 100g"];

                 const current = new Date(startDate);
                 let dayCount = 0;
                 while (current <= endDate) {
                    const dayOfWeek = current.getDay();
                    const weekInPhase = Math.floor(dayCount / 7);
                    let functional = "", cardio = "", cal = "";

                    if ([1, 3, 5].includes(dayOfWeek)) {
                        functional = "ğŸ’ª Functional Palestra 55' (target 650 kcal)";
                        cardio = "ğŸš¶â€â™‚ï¸ Walk di recupero 45' (target 200 kcal)";
                        cal = "200";
                    } else if ([2, 4].includes(dayOfWeek)) {
                        functional = "ğŸ’ª Functional Palestra 55' (target 650 kcal)";
                        if (weekInPhase <= 2) {
                            cardio = "ğŸƒâ€â™‚ï¸ 5' run/1' walk x5 + warm/cool (target 450 kcal)"; cal = "450";
                        } else if (weekInPhase <= 4) {
                            cardio = "ğŸƒâ€â™‚ï¸ Corsa continua 25' + warm/cool (target 480 kcal)"; cal = "480";
                        } else {
                            cardio = "ğŸƒâ€â™‚ï¸ Corsa continua 35' + warm/cool (target 520 kcal)"; cal = "520";
                        }
                    } else if (dayOfWeek === 6) {
                        functional = "ğŸ’ª Functional Palestra 55' (target 650 kcal)";
                        cardio = "ğŸš¶â€â™‚ï¸ Long Walk 15km + 2x5' run (target 550 kcal)"; cal = "550";
                    } else {
                        functional = "ğŸ˜Œ Riposo";
                        cardio = "ğŸ˜Œ Riposo attivo - Recovery (target 200 kcal)"; cal = "200";
                    }

                    const rowData = [formatDate(current), getDayName(current), preWorkouts[dayCount % 5], functional, cardio, colazioni[dayCount % 5], pranzi[dayCount % 5], cene[dayCount % 5], "", "", "", "", cal];
                    addDataRow(rowData, "#f0f8ff", 2000);

                    current.setDate(current.getDate() + 1);
                    dayCount++;
                }
            }
            
            function generateAnalyticalSections() {
                createStaticTable('progress-tracking', 'ğŸ“Š TRACKING PROGRESSI E PERFORMANCE', '#9b59b6', 
                    ["Settimana", "Peso", "Passo Medio", "FC Riposo", "Sonno Medio", "Cal/Giorno", "Trend"], 
                    [
                        ["Settimana 1", "", "", "", "", "", "Baseline"],
                        ["Settimana 2", "", "", "", "", "", "Adattamento"],
                        ["Settimana 4", "", "", "", "", "", "Progressione"],
                        ["Settimana 6", "", "", "", "", "", "Sviluppo"],
                        ["Settimana 8", "", "", "", "", "", "Consolidamento"],
                        ["Settimana 10", "", "", "", "", "", "Intensificazione"],
                        ["Settimana 12", "", "", "", "", "", "TARGET!"]
                    ], '#8e44ad', '#f4f1f7');

                createStaticTable('nutrition-guide', 'ğŸ¥— GUIDA NUTRIZIONALE E TIMING BCAA', '#27ae60',
                    ["Timing", "Cosa", "Macro", "Obiettivo"],
                    [
                        ["06:15", "Pre-workout", "â˜• CaffÃ¨ + 10g BCAA", "Energia + protezione muscolare"],
                        ["08:00", "Post-workout", "Colazione completa", "Recovery + sazietÃ "],
                        ["13:00", "Pranzo", "Proteine + Carboidrati", "Energia pomeriggio"],
                        ["20:00", "Cena", "Proteine + Verdure", "Recovery notturno"]
                    ], '#229954', '#eafaf1');
                
                createStaticTable('advanced-goals', 'ğŸ¯ OBIETTIVI E MILESTONE', '#e74c3c',
                    ["Corsa", "Peso", "Fitness", "Focus"],
                    [
                        ["Sett 2: 1' run continuo", "Sett 2: -1.5kg (102.5)", "FC <85 bpm", "Consistenza"],
                        ["Sett 4: 5' run continuo", "Sett 4: -3kg (101kg)", "Passo <18:00", "Progressione"],
                        ["Sett 8: 20' run continuo", "Sett 8: -6kg (98kg)", "Passo <17:00", "VelocitÃ "],
                        ["Sett 12: 35' run continuo", "Sett 12: -9kg (95kg)", "Passo <16:30", "TARGET!"]
                    ], '#c0392b', '#fadbd8');
            }


            // --- ESECUZIONE ---
            addMetabolicParameters();

            addPhaseSection("FASE 0 (24/09 - 30/09/2025): Adattamento + Test Baseline", "#ff6b6b");
            generatePhase0();

            addPhaseSection("PAUSA (01/10 - 04/10/2025): Recupero Attivo", "#95a5a6");
            generatePause(new Date(2025, 9, 1), new Date(2025, 9, 4));

            addPhaseSection("FASE 1 (05/10 - 31/10/2025): Build Aerobico", "#4ecdc4");
            generatePhase1();
            
            addPhaseSection("PAUSA (01/11 - 03/11/2025): Recupero Attivo", "#95a5a6");
            generatePause(new Date(2025, 10, 1), new Date(2025, 10, 3));

            addPhaseSection("FASE 2 (04/11 - 20/12/2025): Intensificazione + Target", "#45b7d1");
            generatePhase2();
            
            generateAnalyticalSections();
        });
    </script>
</body>
</html>
